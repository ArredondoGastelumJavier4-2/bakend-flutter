{% extends 'menu/base.html' %}
{% load static %}
{% block title %}Carrito{% endblock %}

{% block content %}

<div class="flex justify-center py-10 bg-[#FFF9F2]">

    <!-- CARD NORMAL -->
    <div class="bg-white shadow-xl rounded-2xl p-6 w-full max-w-[700px]">

        {% if items %}

        <!-- HEADER -->
        <div class="flex flex-col items-center mb-5 text-center">
            <img src="{% static 'images/logo.png' %}" alt="Logo" class="h-[60px] mb-2">

            <h4 class="text-[28px] font-bold text-[#393B26]">Tu pedido</h4>

            <small class="text-[#000000] text-[17px]">
                {{ items|length }} artículo{% if items|length > 1 %}s{% endif %}
            </small>
        </div>

        <div class="border-t border-[#e5e5e5] my-4"></div>

        <!-- ITEMS -->
        {% for item in items %}
        <div class="bg-[#9CAB48] text-white p-4 rounded-2xl mb-4 shadow-md flex items-center gap-4 relative">

            <img src="{{ item.producto.imagen.url }}"
                alt="{{ item.producto.nombre }}"
                class="rounded-xl w-[75px] h-[75px] object-cover shadow">

            <div class="flex flex-col">
                <span class="text-[18px] font-bold">{{ item.producto.nombre }}</span>
                <span class="text-[16px] opacity-90">Cantidad: {{ item.cantidad }}</span>
            </div>

            <a href="{% url 'eliminar_carrito' item.id %}"
                class="absolute right-4 bottom-3 text-white text-xl">
                <i class="fa-solid fa-trash"></i>
            </a>

            <span class="ml-auto font-semibold text-[18px] text-[#FFF9F2]">
                ${{ item.subtotal }}
            </span>

        </div>
        {% endfor %}

        <div class="border-t border-[#e5e5e5] my-4"></div>

        <!-- TOTAL -->
        <div class="flex justify-between items-center text-[20px] text-[#43462C] font-semibold px-2">
            <span>Total</span>
            <span>${{ total }}</span>
        </div>

        <!-- BOTÓN -->
        <div class="text-center mt-5">
            <a href="{% url 'pago_tarjeta' %}"
            class="w-full bg-[#4B5320] hover:bg-[#43462C] text-white py-3 rounded-lg shadow-md font-semibold flex items-center justify-center gap-2 transition">
                <i class="fa-solid fa-credit-card"></i>
                Proceder al pago
            </a>
        </div>

        {% else %}

        <!-- CARRITO VACÍO -->
        <div class="text-center py-10">
            <h4 class="text-[#43462C] mb-3 text-xl flex flex-col items-center">
                <i class="fa-solid fa-cart-shopping text-3xl mb-2"></i>
                Tu carrito está vacío
            </h4>

            <a href="{% url 'cliente_dashboard' %}"
                class="inline-flex items-center gap-2 bg-[#3D5C1F] text-white px-4 py-2 rounded-lg font-semibold hover:bg-[#324A19] transition">
                <i class="fa-solid fa-arrow-left-long"></i>
                Volver al menú
            </a>
        </div>

        {% endif %}

    </div>

</div>

{% endblock %}
