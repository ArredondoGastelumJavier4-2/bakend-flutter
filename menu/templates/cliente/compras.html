{% extends 'menu/base.html' %}
{% load static %}
{% block title %}Mis compras{% endblock %}

{% block content %}

<div class="flex justify-center py-10 bg-[#FFF9F2] min-h-screen">

    <div class="w-full max-w-[700px]">

        <div class="flex flex-col items-center mb-6 text-center">
            <img src="{% static 'images/logo.png' %}" alt="Logo" class="h-[60px] mb-2">
            <h2 class="text-[28px] font-bold text-[#393B26]">Mis pedidos</h2>
        </div>

        {% if pedidos %}
        <div class="flex flex-col gap-5">

            {% for pedido in pedidos %}
            <div class="bg-white p-5 rounded-2xl shadow-xl border-t-4 border-[#9CAB48] relative">

                <div class="flex justify-between items-start mb-2">
                    <div>
                        <h5 class="text-[20px] font-bold text-[#43462C]">
                            Pedido #{{ pedido.id }}
                        </h5>
                        <p class="text-sm text-gray-600 mt-0">
                            {{ pedido.fecha|date:"d/m/Y H:i" }}
                        </p>
                    </div>

                    {% if pedido.estatus == "activo" %}
                    <span class="px-3 py-1 rounded-full bg-[#FF5722] text-[#FFF9F2] text-sm font-semibold shadow-sm">
                        <i class="fa-solid fa-clock"></i> Activo
                    </span>

                    {% elif pedido.estatus == "listo" %}
                    <span class="px-3 py-1 rounded-full bg-[#F4B41A] text-[#FFF9F2] text-sm font-semibold shadow-sm">
                        <i class="fa-solid fa-check"></i> Listo
                    </span>

                    {% elif pedido.estatus == "entregado" %}
                    <span class="px-3 py-1 rounded-full bg-[#4B5320] text-[#FFF9F2] text-sm font-semibold shadow-sm">
                        <i class="fa-solid fa-truck"></i> Entregado
                    </span>
                    {% endif %}
                </div>

                <div class="border-t border-[#e5e5e5] my-3"></div>

                <div class="flex justify-between items-center pt-1">
                    <p class="text-[22px] font-bold text-[#4B5320]">
                        Total: ${{ pedido.total }}
                    </p>

                    <a href="{% url 'pedido_detalle_cliente' pedido.id %}"
                        class="inline-flex items-center gap-2 bg-[#4B5320] hover:bg-[#43462C] text-white px-4 py-2 rounded-lg shadow-md font-semibold transition">
                        <i class="fa-solid fa-eye"></i>
                        Ver detalles
                    </a>
                </div>

            </div>
            {% endfor %}

        </div>

        {% else %}

        <div class="bg-white shadow-xl rounded-2xl p-6 mt-6">
            <div class="text-center py-10">
                <h4 class="text-[#43462C] mb-3 text-xl flex flex-col items-center">
                    <i class="fa-solid fa-receipt text-3xl mb-2"></i>
                    Aún no has realizado compras.
                </h4>

                <a href="{% url 'cliente_dashboard' %}"
                    class="inline-flex items-center gap-2 bg-[#4B5320] text-white px-4 py-2 rounded-lg font-semibold hover:bg-[#43462C] transition">
                    <i class="fa-solid fa-arrow-left-long"></i>
                    Volver al menú
                </a>
            </div>
        </div>

        {% endif %}
    </div>

</div>

{% endblock %}